<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">  
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
       
    <title>Автомобільний каталог</title>
</head>
<body>
    <div style="text-align: center; margin:2% 0">
        <h1>Автомобільний каталог</h1>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
              Додати автомобіль
            </button>

            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style="background-color:transparent; box-shadow: none; max-height:1000px ;">
              
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Додати автомобіль</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                    <form method="POST" action="/add" >    
                      <div class="row">
                        <div class="input-field col s6">
                          <input id="N" type="text" class="validate" name="name">
                          <label for="N">Name</label>
                        </div>
                        <div class="input-field col s6">
                          <input id="Cr" type="text" class="validate" name="color">
                          <label for="Cr">Color Name</label>
                        </div>
                      </div>

                      <div class="row">
                        <div class="input-field col s6">
                          <input id="M" type="text" class="validate" name="manufacturer">
                          <label for="M">Manufacturer</label>
                        </div>
                        <div class="input-field col s6">
                          <input id="Y" type="number" class="validate" name="year">
                          <label for="Y">Year</label>
                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s6">
                          <input id="V" type="text" class="validate" name="volume">
                          <label for="V">Volume</label>
                        </div>
                        <div class="input-field col s6">
                          <input id="P" type="number" class="validate" name="price">
                          <label for="P">Price</label>
                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s12">
                          <input id="D" type="text" class="validate" name="description">
                          <label for="D">Description</label>
                        </div>
                      </div>
                        
                    </div>
                    <div class="modal-body" style="width: 100%;">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="float:left">Закрити</button>
                        <button type="submit" class="btn btn-primary" style="float:right">Зберегти</button>
                    </div>
                  </form>
                  </div>
                </div>
              
            </div>
    </div>
    <form action="/" method="post"> 
        <div class="row" style="width: 80%; text-align: center; margin: 5% auto 2% auto">
            <div class="row">
                <div class="col">
                    <select class="browser-default" name="selectManufacturers">
                        <option value="1" disabled selected>Виробник</option>

                        <% manufacturers.forEach((item) => {%>
                            <option value="<%=item%>"><%=item%></option>
                        <% })%>

                      </select>
                </div>
                <div class="col">
                    <select class="browser-default" name="selectYears">
                        <option value="" disabled selected>Рік випуску</option>
                        <% years.forEach((item) => {%>
                            <option value="<%=item%>"><%=item%></option>
                        <% })%>
                      </select>
                </div>
                <div class="col">
                    <select class="browser-default" name="selectColors">
                        <option value="" disabled selected>Кольор</option>
                        <% colors.forEach((item) => {%>
                            <option value="<%=item%>"><%=item%></option>
                        <% })%>
                      </select>
                </div>
                <div class="col">
                    <select class="browser-default" name="selectVolumes">
                        <option value="" disabled selected>Об'єм</option>
                        <% volumes.forEach((item) => {%>
                            <option value="<%=item%>"><%=item%></option>
                        <% })%>
                      </select>
                </div>
            </div>
    
            <div class="row">
                <div class="col">
                        <div class="input-field col s6">
                          <input id="first_name" type="number" class="validate" name="priceOne">
                          <label for="first_name">Ціна від</label>
                        </div>
                        <div class="input-field col s6">
                          <input id="last_name" type="number" class="validate" name="priceTwo">
                          <label for="last_name">до</label>
                        </div>
                </div>
                <div class="col-12">
                    <button type="submit" class="waves-effect waves-light btn">Прийняти</button>
                </div>
            </div>
          </div>
      </form>
    <div style="width: 80%; margin: 0 auto; font-size: 20px;">
        <table class="table table-bordered">
            <thead>
              <tr>
                <th>Name</th>
                <th>Manufacturer</th>
                <th>Year</th>
                <th>Volume</th>
                <th>Price</th>
                <th>Color</th>
                <th>Description</th>
                <th>Edit</th>
                <th>Delete</th>
              </tr>
            </thead>
            <tbody>
              <% cars.forEach((item) => {%>
              <tr>
                <td><%= item.name %></td>
                <td><%= item.manufacturer %></td>
                <td><%= item.year %></td>
                <td><%= item.volume %></td>
                <td><%= item.price %></td>
                <td><%= item.color %></td>
                <td><%= item.description %></td>
                <td> 
             <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editModal<%=item.id%>">
              Edit
            </button>
            <!-- Modal -->
            <div class="modal fade" id="editModal<%=item.id%>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style="background-color:transparent; box-shadow: none; max-height:1000px ;">
              <form action="/edit"  method="post">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Редагувати автомобіль</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        
                      <div class="row">
                        <div class="input-field col s6">
                          <input id="carName" type="text" class="validate" name="name"  value="<%=item.name%>"></input>
                          <label for="carName">Name</label>
                        </div>
                        <div class="input-field col s6">
                          <input id="carColor" type="text" class="validate" name="color" value="<%=item.color%>">
                          <label for="carColor">Color Name</label>
                        </div>
                      </div>

                      <div class="row">
                        <div class="input-field col s6">
                          <input id="carManufacturer" type="text" class="validate" name="manufacturer" value="<%= item.manufacturer %>">
                          <label for="carManufacturer">Manufacturer</label>
                        </div>
                        <div class="input-field col s6">
                          <input id="carYear" type="number" class="validate" name="year" value="<%= item.year %>">
                          <label for="carYear">Year</label>
                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s6">
                          <input id="carVolume" type="text" class="validate" name="volume" value="<%= item.volume %>">
                          <label for="carVolume">Volume</label>
                        </div>
                        <div class="input-field col s6">
                          <input id="carPrice" type="number" class="validate" name="price" value="<%= item.price %>">
                          <label for="carPrice">Price</label>
                        </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s12">
                          <input id="carDescription" type="text" class="validate" name="description" value="<%= item.description %>">
                          <label for="carDescription">Description</label>
                        </div>
                      </div>
                        
                    </div>
                    <div class="modal-body" style="width: 100%;">
                        <input hidden name="id" value="<%= item.id %>"/>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="float:left">Закрити</button>
                        <button type="submit" class="btn btn-primary" style="float:right">Зберегти</button>
                    </div>
                  </div>
                </form>
                </div>
              

                </td>
                <td>
                  <form action="/delete" method="post">
                    <input hidden name="id" value="<%= item.id %>"/>
                    <button type="submit" class="btn btn-primary" style="background-color: rgb(219, 48, 48);">
                      -
                    </button>
                  </form>
                </td>
              </tr>
              <% })%>
            </tbody>
          </table>
    </div>    
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>